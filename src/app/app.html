<div class="logo-container">
  <img src="ais-logo.jpg" alt="Company Logo" class="logo">
</div>

<main class="main-content">
  <h1 class="page-main-title">Text Analyzer</h1>

  <div class="analysis-card">
    <h2 class="card-title">Upload Your File</h2>
    <p class="card-subtitle">Select a .txt file to begin the analysis.</p>

    <div class="form-group">
      <label class="form-label">Text File</label>
      <div class="file-input-wrapper">
        <label for="fileUpload" class="file-input-label">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon"><path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"></path></svg>
          <span>Choose File</span>
        </label>
        <span class="file-name-display">{{ selectedFileName() }}</span>
        @if (isFileSelected()) {
          <button class="clear-file-button" (click)="clearFile()">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
          </button>
        }
        <input type="file" id="fileUpload" class="file-input-hidden" accept=".txt" (change)="onFileSelected($event)" />
      </div>
    </div>

    <button class="analyze-button" [disabled]="!isFileSelected() || isLoading()" (click)="analyzeText()">
      @if (isLoading()) {
        <div class="loader"></div>
      } @else {
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon"><line x1="12" y1="20" x2="12" y2="10"></line><line x1="18" y1="20" x2="18" y2="4"></line><line x1="6" y1="20" x2="6" y2="16"></line></svg>
        <span>Analyze Text</span>
      }
    </button>
  </div>

  @if (analysisResult()) {
    <div class="results-card">
      <h2 class="card-title">Analysis Results</h2>
      <p class="card-subtitle">Results for file: {{ selectedFileName() }}</p>

      <div class="slow-bike-card">
        <div class="slow-bike-info">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="bike-icon"><circle cx="5.5" cy="17.5" r="3.5"/><circle cx="18.5" cy="17.5" r="3.5"/><path d="M15 6l-4 4h3l-4 4"/><path d="M2 17.5h2.5l2-4L9 17.5h8.5"/></svg>
          <span>'slow bike' occurrences</span>
        </div>
        <span class="slow-bike-count">{{ analysisResult().slowBikeCount }}</span>
      </div>

      <h3 class="consonant-counts-title">Consonant Counts</h3>
      @if (consonantCountsArray().length > 0) {
        <div class="consonant-grid">
          @for (item of consonantCountsArray(); track item.key) {
            <div class="consonant-card">
              <span class="consonant-char">{{ item.key.toUpperCase() }}</span>
              <span class="consonant-count">{{ item.value }}</span>
            </div>
          }
        </div>
      } @else {
        <p>No consonants were found in the file.</p>
      }

      <button class="download-button" (click)="downloadResults()">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
        <span>Download Results as JSON</span>
      </button>
    </div>
  }
</main>
<app-toast></app-toast>
